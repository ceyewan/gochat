{"level":"info","timestamp":"2025-07-21T23:17:09.704+0800","module":"etcd","caller":"etcd-client/example_usage.go:27","message":"开始 etcd 示例程序"}
{"level":"info","timestamp":"2025-07-21T23:17:09.704+0800","module":"etcd","caller":"etcd-client/example_usage.go:44","message":"=== 基本客户端示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:17:09.704+0800","module":"etcd","caller":"etcd/client.go:33","message":"开始创建 etcd 客户端","endpoints":["localhost:2379"],"dial_timeout":5}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/client.go:49","message":"etcd 客户端创建成功","endpoints":["localhost:2379"]}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd-client/example_usage.go:60","message":"基本客户端创建成功"}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/client.go:91","message":"开始关闭 etcd 客户端连接"}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/client.go:99","message":"etcd 客户端连接已关闭"}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd-client/example_usage.go:66","message":"=== 管理器示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:2379"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:17:09.705+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:2379"]}]}
{"level":"error","timestamp":"2025-07-21T23:17:14.706+0800","module":"etcd","caller":"etcd/options.go:338","message":"etcd error","args":["连接 etcd 失败",{"Key":"error","Type":26,"Integer":0,"String":"","Interface":{"type":"CONNECTION_ERROR","code":1000,"message":"failed to connect to etcd","cause":{}}}],"stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.(*ClogAdapter).Error\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/options.go:338\ngithub.com/ceyewan/gochat/im-infra/etcd.(*etcdManager).initializeComponents\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:89\ngithub.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:58\nmain.managerExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:81\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:33\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/manager.go:59","message":"初始化组件失败","error":"[CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:59\nmain.managerExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:81\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:33\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd-client/example_usage.go:83","message":"创建管理器失败","error":"[CONFIGURATION_ERROR] failed to initialize manager components: [CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"main.managerExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:83\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:33\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"info","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd-client/example_usage.go:104","message":"=== 服务注册和发现示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:2379"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:17:14.707+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:2379"]}]}
{"level":"error","timestamp":"2025-07-21T23:17:19.713+0800","module":"etcd","caller":"etcd/options.go:338","message":"etcd error","args":["连接 etcd 失败",{"Key":"error","Type":26,"Integer":0,"String":"","Interface":{"type":"CONNECTION_ERROR","code":1000,"message":"failed to connect to etcd","cause":{}}}],"stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.(*ClogAdapter).Error\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/options.go:338\ngithub.com/ceyewan/gochat/im-infra/etcd.(*etcdManager).initializeComponents\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:89\ngithub.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:58\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:110\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:36\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:17:19.713+0800","module":"etcd","caller":"etcd/manager.go:59","message":"初始化组件失败","error":"[CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:59\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:110\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:36\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:17:19.713+0800","module":"etcd","caller":"etcd-client/example_usage.go:112","message":"创建管理器失败","error":"[CONFIGURATION_ERROR] failed to initialize manager components: [CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"main.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:112\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:36\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"info","timestamp":"2025-07-21T23:17:19.713+0800","module":"etcd","caller":"etcd-client/example_usage.go:38","message":"etcd 示例程序结束"}
{"level":"info","timestamp":"2025-07-21T23:19:36.974+0800","module":"etcd","caller":"etcd-client/example_usage.go:28","message":"开始 etcd 示例程序"}
{"level":"info","timestamp":"2025-07-21T23:19:36.975+0800","module":"etcd","caller":"etcd-client/example_usage.go:45","message":"=== 基本客户端示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:19:36.975+0800","module":"etcd","caller":"etcd/client.go:33","message":"开始创建 etcd 客户端","endpoints":["localhost:23791"],"dial_timeout":5}
{"level":"info","timestamp":"2025-07-21T23:19:36.976+0800","module":"etcd","caller":"etcd/client.go:49","message":"etcd 客户端创建成功","endpoints":["localhost:23791"]}
{"level":"info","timestamp":"2025-07-21T23:19:36.976+0800","module":"etcd","caller":"etcd-client/example_usage.go:61","message":"基本客户端创建成功"}
{"level":"info","timestamp":"2025-07-21T23:19:36.976+0800","module":"etcd","caller":"etcd/client.go:91","message":"开始关闭 etcd 客户端连接"}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/client.go:99","message":"etcd 客户端连接已关闭"}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd-client/example_usage.go:67","message":"=== 管理器示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:2379"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:19:36.977+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:2379"]}]}
{"level":"error","timestamp":"2025-07-21T23:19:41.979+0800","module":"etcd","caller":"etcd/options.go:338","message":"etcd error","args":["连接 etcd 失败",{"Key":"error","Type":26,"Integer":0,"String":"","Interface":{"type":"CONNECTION_ERROR","code":1000,"message":"failed to connect to etcd","cause":{}}}],"stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.(*ClogAdapter).Error\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/options.go:338\ngithub.com/ceyewan/gochat/im-infra/etcd.(*etcdManager).initializeComponents\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:89\ngithub.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:58\nmain.managerExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:82\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:34\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:19:41.979+0800","module":"etcd","caller":"etcd/manager.go:59","message":"初始化组件失败","error":"[CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:59\nmain.managerExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:82\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:34\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd-client/example_usage.go:84","message":"创建管理器失败","error":"[CONFIGURATION_ERROR] failed to initialize manager components: [CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"main.managerExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:84\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:34\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"info","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd-client/example_usage.go:105","message":"=== 服务注册和发现示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:2379"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:19:41.980+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:2379"]}]}
{"level":"error","timestamp":"2025-07-21T23:19:46.982+0800","module":"etcd","caller":"etcd/options.go:338","message":"etcd error","args":["连接 etcd 失败",{"Key":"error","Type":26,"Integer":0,"String":"","Interface":{"type":"CONNECTION_ERROR","code":1000,"message":"failed to connect to etcd","cause":{}}}],"stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.(*ClogAdapter).Error\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/options.go:338\ngithub.com/ceyewan/gochat/im-infra/etcd.(*etcdManager).initializeComponents\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:89\ngithub.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:58\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:111\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:37\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:19:46.982+0800","module":"etcd","caller":"etcd/manager.go:59","message":"初始化组件失败","error":"[CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:59\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:111\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:37\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:19:46.982+0800","module":"etcd","caller":"etcd-client/example_usage.go:113","message":"创建管理器失败","error":"[CONFIGURATION_ERROR] failed to initialize manager components: [CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"main.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:113\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:37\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"info","timestamp":"2025-07-21T23:19:46.983+0800","module":"etcd","caller":"etcd-client/example_usage.go:39","message":"etcd 示例程序结束"}
{"level":"info","timestamp":"2025-07-21T23:20:16.725+0800","module":"etcd","caller":"etcd-client/example_usage.go:28","message":"开始 etcd 示例程序"}
{"level":"info","timestamp":"2025-07-21T23:20:16.726+0800","module":"etcd","caller":"etcd-client/example_usage.go:45","message":"=== 基本客户端示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:20:16.726+0800","module":"etcd","caller":"etcd/client.go:33","message":"开始创建 etcd 客户端","endpoints":["localhost:23791"],"dial_timeout":5}
{"level":"info","timestamp":"2025-07-21T23:20:16.727+0800","module":"etcd","caller":"etcd/client.go:49","message":"etcd 客户端创建成功","endpoints":["localhost:23791"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.727+0800","module":"etcd","caller":"etcd-client/example_usage.go:61","message":"基本客户端创建成功"}
{"level":"info","timestamp":"2025-07-21T23:20:16.727+0800","module":"etcd","caller":"etcd/client.go:91","message":"开始关闭 etcd 客户端连接"}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/client.go:99","message":"etcd 客户端连接已关闭"}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd-client/example_usage.go:67","message":"=== 管理器示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:23791"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.728+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:23791"]}]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Successfully connected to etcd"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["etcd 连接建立成功"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建租约管理器"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建服务注册组件"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/registry.go:49","message":"使用管理器创建服务注册实例"}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/registry.go:68","message":"服务注册实例创建成功","service_prefix":"/services","default_ttl":30}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["服务注册组件创建成功"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建服务发现组件"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/discovery.go:28","message":"创建服务发现组件"}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/discovery.go:40","message":"服务发现组件创建成功"}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["服务发现组件创建成功"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建分布式锁组件"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/lock.go:40","message":"创建分布式锁管理器","lock_prefix":"/locks"}
{"level":"debug","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["分布式锁组件创建成功"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["所有 etcd 组件初始化完成"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/manager.go:62","message":"组件初始化成功"}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/manager.go:65","message":"启动健康检查"}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["etcd 管理器初始化成功"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd/manager.go:70","message":"etcd 管理器创建完成"}
{"level":"info","timestamp":"2025-07-21T23:20:16.751+0800","module":"etcd","caller":"etcd-client/example_usage.go:89","message":"管理器创建成功"}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd-client/example_usage.go:98","message":"健康检查通过"}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始关闭 etcd 管理器"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["停止健康检查"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["关闭分布式锁组件"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Distributed lock manager closed"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["分布式锁组件关闭成功"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["关闭租约管理器"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Lease manager closed"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["租约管理器关闭成功"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["关闭连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Disconnected from etcd"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["连接管理器关闭成功"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["etcd 管理器关闭成功"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd-client/example_usage.go:105","message":"=== 服务注册和发现示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:2379"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:20:16.755+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:2379"]}]}
{"level":"error","timestamp":"2025-07-21T23:20:21.757+0800","module":"etcd","caller":"etcd/options.go:338","message":"etcd error","args":["连接 etcd 失败",{"Key":"error","Type":26,"Integer":0,"String":"","Interface":{"type":"CONNECTION_ERROR","code":1000,"message":"failed to connect to etcd","cause":{}}}],"stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.(*ClogAdapter).Error\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/options.go:338\ngithub.com/ceyewan/gochat/im-infra/etcd.(*etcdManager).initializeComponents\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:89\ngithub.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:58\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:111\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:37\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:20:21.758+0800","module":"etcd","caller":"etcd/manager.go:59","message":"初始化组件失败","error":"[CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:59\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:111\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:37\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:20:21.758+0800","module":"etcd","caller":"etcd-client/example_usage.go:113","message":"创建管理器失败","error":"[CONFIGURATION_ERROR] failed to initialize manager components: [CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"main.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:113\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:37\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"info","timestamp":"2025-07-21T23:20:21.758+0800","module":"etcd","caller":"etcd-client/example_usage.go:39","message":"etcd 示例程序结束"}
{"level":"info","timestamp":"2025-07-21T23:21:33.410+0800","module":"etcd","caller":"etcd-client/example_usage.go:27","message":"开始 etcd 示例程序"}
{"level":"info","timestamp":"2025-07-21T23:21:33.411+0800","module":"etcd","caller":"etcd-client/example_usage.go:44","message":"=== 基本客户端示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:21:33.411+0800","module":"etcd","caller":"etcd/client.go:33","message":"开始创建 etcd 客户端","endpoints":["localhost:23791"],"dial_timeout":5}
{"level":"info","timestamp":"2025-07-21T23:21:33.412+0800","module":"etcd","caller":"etcd/client.go:49","message":"etcd 客户端创建成功","endpoints":["localhost:23791"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.412+0800","module":"etcd","caller":"etcd-client/example_usage.go:60","message":"基本客户端创建成功"}
{"level":"info","timestamp":"2025-07-21T23:21:33.412+0800","module":"etcd","caller":"etcd/client.go:91","message":"开始关闭 etcd 客户端连接"}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/client.go:99","message":"etcd 客户端连接已关闭"}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd-client/example_usage.go:66","message":"=== 管理器示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:23791"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.413+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:23791"]}]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Successfully connected to etcd"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["etcd 连接建立成功"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建租约管理器"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建服务注册组件"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/registry.go:49","message":"使用管理器创建服务注册实例"}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/registry.go:68","message":"服务注册实例创建成功","service_prefix":"/services","default_ttl":30}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["服务注册组件创建成功"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建服务发现组件"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/discovery.go:28","message":"创建服务发现组件"}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/discovery.go:40","message":"服务发现组件创建成功"}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["服务发现组件创建成功"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建分布式锁组件"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/lock.go:40","message":"创建分布式锁管理器","lock_prefix":"/locks"}
{"level":"debug","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["分布式锁组件创建成功"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["所有 etcd 组件初始化完成"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/manager.go:62","message":"组件初始化成功"}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/manager.go:65","message":"启动健康检查"}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["etcd 管理器初始化成功"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd/manager.go:70","message":"etcd 管理器创建完成"}
{"level":"info","timestamp":"2025-07-21T23:21:33.436+0800","module":"etcd","caller":"etcd-client/example_usage.go:88","message":"管理器创建成功"}
{"level":"info","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd-client/example_usage.go:97","message":"健康检查通过"}
{"level":"info","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始关闭 etcd 管理器"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["停止健康检查"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["关闭分布式锁组件"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Distributed lock manager closed"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["分布式锁组件关闭成功"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["关闭租约管理器"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Lease manager closed"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["租约管理器关闭成功"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["关闭连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.439+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["Disconnected from etcd"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["连接管理器关闭成功"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["etcd 管理器关闭成功"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd-client/example_usage.go:104","message":"=== 服务注册和发现示例 ==="}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/manager.go:37","message":"开始创建 etcd 管理器"}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/manager.go:44","message":"etcd 管理器配置","endpoints":["localhost:2379"],"dial_timeout":5,"service_prefix":"/services","default_ttl":30}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/manager.go:57","message":"开始初始化组件"}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["开始初始化 etcd 组件"]}
{"level":"debug","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/options.go:323","message":"etcd debug","args":["创建连接管理器"]}
{"level":"info","timestamp":"2025-07-21T23:21:33.440+0800","module":"etcd","caller":"etcd/options.go:328","message":"etcd info","args":["建立 etcd 连接",{"Key":"endpoints","Type":1,"Integer":0,"String":"","Interface":["localhost:2379"]}]}
{"level":"error","timestamp":"2025-07-21T23:21:38.441+0800","module":"etcd","caller":"etcd/options.go:338","message":"etcd error","args":["连接 etcd 失败",{"Key":"error","Type":26,"Integer":0,"String":"","Interface":{"type":"CONNECTION_ERROR","code":1000,"message":"failed to connect to etcd","cause":{}}}],"stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.(*ClogAdapter).Error\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/options.go:338\ngithub.com/ceyewan/gochat/im-infra/etcd.(*etcdManager).initializeComponents\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:89\ngithub.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:58\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:110\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:36\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:21:38.442+0800","module":"etcd","caller":"etcd/manager.go:59","message":"初始化组件失败","error":"[CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"github.com/ceyewan/gochat/im-infra/etcd.NewEtcdManager\n\t/Users/harrick/CodeField/gochat/im-infra/etcd/manager.go:59\nmain.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:110\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:36\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"error","timestamp":"2025-07-21T23:21:38.442+0800","module":"etcd","caller":"etcd-client/example_usage.go:112","message":"创建管理器失败","error":"[CONFIGURATION_ERROR] failed to initialize manager components: [CONNECTION_ERROR] failed to connect to etcd: [CONNECTION_ERROR] failed to connect to etcd: context deadline exceeded","stacktrace":"main.serviceRegistryExample\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:112\nmain.main\n\t/Users/harrick/CodeField/gochat/im-infra/etcd-client/example_usage.go:36\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.3/libexec/src/runtime/proc.go:283"}
{"level":"info","timestamp":"2025-07-21T23:21:38.442+0800","module":"etcd","caller":"etcd-client/example_usage.go:38","message":"etcd 示例程序结束"}
