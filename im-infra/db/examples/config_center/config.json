{
  "comment": "这是一个示例配置文件，展示如何在配置中心中存储 db 配置",
  "configs": {
    "/config/dev/gochat/db": {
      "dsn": "root:mysql@tcp(localhost:3306)/gochat_dev?charset=utf8mb4&parseTime=True&loc=Local",
      "driver": "mysql",
      "maxOpenConns": 20,
      "maxIdleConns": 10,
      "connMaxLifetime": "1h",
      "connMaxIdleTime": "30m",
      "logLevel": "info",
      "slowThreshold": "500ms",
      "enableMetrics": true,
      "enableTracing": false,
      "tablePrefix": "dev_",
      "disableForeignKeyConstraintWhenMigrating": false,
      "autoCreateDatabase": true
    },
    "/config/dev/gochat/db-user": {
      "dsn": "root:mysql@tcp(localhost:3306)/gochat_user_dev?charset=utf8mb4&parseTime=True&loc=Local",
      "driver": "mysql",
      "maxOpenConns": 15,
      "maxIdleConns": 8,
      "connMaxLifetime": "1h",
      "connMaxIdleTime": "30m",
      "logLevel": "warn",
      "slowThreshold": "300ms",
      "enableMetrics": true,
      "enableTracing": false,
      "tablePrefix": "user_",
      "disableForeignKeyConstraintWhenMigrating": false,
      "autoCreateDatabase": true
    },
    "/config/dev/gochat/db-order": {
      "dsn": "root:mysql@tcp(localhost:3306)/gochat_order_dev?charset=utf8mb4&parseTime=True&loc=Local",
      "driver": "mysql",
      "maxOpenConns": 25,
      "maxIdleConns": 12,
      "connMaxLifetime": "1h",
      "connMaxIdleTime": "30m",
      "logLevel": "warn",
      "slowThreshold": "200ms",
      "enableMetrics": true,
      "enableTracing": true,
      "tablePrefix": "order_",
      "disableForeignKeyConstraintWhenMigrating": false,
      "autoCreateDatabase": true
    },
    "/config/prod/gochat/db": {
      "dsn": "root:secure_password@tcp(mysql-prod:3306)/gochat_prod?charset=utf8mb4&parseTime=True&loc=Local",
      "driver": "mysql",
      "maxOpenConns": 100,
      "maxIdleConns": 50,
      "connMaxLifetime": "2h",
      "connMaxIdleTime": "1h",
      "logLevel": "error",
      "slowThreshold": "100ms",
      "enableMetrics": true,
      "enableTracing": true,
      "tablePrefix": "",
      "disableForeignKeyConstraintWhenMigrating": false,
      "autoCreateDatabase": false
    }
  },
  "usage": {
    "description": "将这些配置存储到 etcd 中",
    "commands": [
      "etcdctl put /config/dev/gochat/db '{\"dsn\":\"root:mysql@tcp(localhost:3306)/gochat_dev?charset=utf8mb4&parseTime=True&loc=Local\",\"driver\":\"mysql\",\"maxOpenConns\":20,\"maxIdleConns\":10,\"connMaxLifetime\":\"1h\",\"connMaxIdleTime\":\"30m\",\"logLevel\":\"info\",\"slowThreshold\":\"500ms\",\"enableMetrics\":true,\"enableTracing\":false,\"tablePrefix\":\"dev_\",\"disableForeignKeyConstraintWhenMigrating\":false,\"autoCreateDatabase\":true}'",
      "etcdctl put /config/dev/gochat/db-user '{\"dsn\":\"root:mysql@tcp(localhost:3306)/gochat_user_dev?charset=utf8mb4&parseTime=True&loc=Local\",\"driver\":\"mysql\",\"maxOpenConns\":15,\"maxIdleConns\":8,\"connMaxLifetime\":\"1h\",\"connMaxIdleTime\":\"30m\",\"logLevel\":\"warn\",\"slowThreshold\":\"300ms\",\"enableMetrics\":true,\"enableTracing\":false,\"tablePrefix\":\"user_\",\"disableForeignKeyConstraintWhenMigrating\":false,\"autoCreateDatabase\":true}'"
    ]
  }
}
